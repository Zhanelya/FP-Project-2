<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>DB</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_DB.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>(c) Zhanelya Subebayeva, January 2015</td></tr><tr><th>License</th><td>GNU</td></tr><tr><th>Maintainer</th><td>subebo91@inbox.ru</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>MacOS, Linux</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">DB</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Initialising DB</a></li><li><a href="#g:2">Query functions</a></li><li><a href="#g:3">Insert functions           </a></li><li><a href="#g:4">Helper functions</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Within this module <code>DB</code> access functions allowing to query and to store the data are provided.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:initialise">initialise</a> :: IO ()</li><li class="src short"><a href="#v:queryStock">queryStock</a> :: String -&gt; IO ()</li><li class="src short"><a href="#v:queryDate">queryDate</a> :: String -&gt; String -&gt; IO ()</li><li class="src short"><a href="#v:queryMinPrice">queryMinPrice</a> :: IO ()</li><li class="src short"><a href="#v:queryMaxPrice">queryMaxPrice</a> :: IO ()</li><li class="src short"><a href="#v:convRowP">convRowP</a> :: [SqlValue] -&gt; String</li><li class="src short"><a href="#v:queryMaxVolume">queryMaxVolume</a> :: IO ()</li><li class="src short"><a href="#v:convRowV">convRowV</a> :: [SqlValue] -&gt; String</li><li class="src short"><a href="#v:queryCompanies">queryCompanies</a> :: IO ()</li><li class="src short"><a href="#v:convRow">convRow</a> :: [SqlValue] -&gt; String</li><li class="src short"><a href="#v:queryCompany">queryCompany</a> :: String -&gt; IO String</li><li class="src short"><a href="#v:convRowC">convRowC</a> :: [SqlValue] -&gt; String</li><li class="src short"><a href="#v:insert">insert</a> :: <a href="DataType.html#t:Price">Price</a> -&gt; IO ()</li><li class="src short"><a href="#v:insertMany">insertMany</a> :: String -&gt; [<a href="DataType.html#t:Price">Price</a>] -&gt; IO ()</li><li class="src short"><a href="#v:insertCompany">insertCompany</a> :: String -&gt; String -&gt; IO ()</li><li class="src short"><span class="keyword">type</span> <a href="#t:Date">Date</a> = (Integer, Int, Int)</li><li class="src short"><a href="#v:getYear">getYear</a> :: <a href="DB.html#t:Date">Date</a> -&gt; String</li><li class="src short"><a href="#v:getMonth">getMonth</a> :: <a href="DB.html#t:Date">Date</a> -&gt; String</li><li class="src short"><a href="#v:getDay">getDay</a> :: <a href="DB.html#t:Date">Date</a> -&gt; String</li><li class="src short"><a href="#v:formRows">formRows</a> :: String -&gt; [<a href="DataType.html#t:Price">Price</a>] -&gt; [[SqlValue]]</li><li class="src short"><a href="#v:formRow">formRow</a> :: String -&gt; <a href="DataType.html#t:Price">Price</a> -&gt; [SqlValue]</li></ul></div><div id="interface"><h1 id="g:1">Initialising DB</h1><div class="top"><p class="src"><a name="v:initialise" class="def">initialise</a> :: IO ()</p><div class="doc"><p>The <code><a href="DB.html#v:initialise">initialise</a></code> function has a purpose to initialise database and 2 tables - companies list and stock prices
   companies table consists of company name, date downloaded and stored in DB and username who downloaded it
   stock prices table consists of company name, dates and corresponding volume and a range of stock prices for each date</p></div></div><h1 id="g:2">Query functions</h1><div class="top"><p class="src"><a name="v:queryStock" class="def">queryStock</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>The <code>String</code> argument to provide the company name to query</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>The <code><a href="DB.html#v:queryStock">queryStock</a></code> has a purpose to query stock prices	   </p></div></div><div class="top"><p class="src"><a name="v:queryDate" class="def">queryDate</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>The <code>String</code> argument to provide the company name to query</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>The <code>String</code> argument to provide the date to query</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>The <code><a href="DB.html#v:queryDate">queryDate</a></code> function has a purpose to get company information at a certain date (volume, open, close prices)</p></div></div><div class="top"><p class="src"><a name="v:queryMinPrice" class="def">queryMinPrice</a> :: IO ()</p><div class="doc"><p>The <code><a href="DB.html#v:queryMinPrice">queryMinPrice</a></code> function has a purpose to get the lowest stock close price among the companies stored in DB 
   (for each company only 100 rows are stored)</p></div></div><div class="top"><p class="src"><a name="v:queryMaxPrice" class="def">queryMaxPrice</a> :: IO ()</p><div class="doc"><p>The <code><a href="DB.html#v:queryMaxPrice">queryMaxPrice</a></code> function has a purpose to get the highest stock close price among the companies stored in DB 
   (for each company only 100 rows are stored)</p></div></div><div class="top"><p class="src"><a name="v:convRowP" class="def">convRowP</a> :: [SqlValue] -&gt; String</p><div class="doc"><p>The <code><a href="DB.html#v:convRowP">convRowP</a></code> function is a helper function to process prices rows to get close price	</p></div></div><div class="top"><p class="src"><a name="v:queryMaxVolume" class="def">queryMaxVolume</a> :: IO ()</p><div class="doc"><p>The <code><a href="DB.html#v:queryMaxVolume">queryMaxVolume</a></code> function has a purpose to get the highest stock volume among the companies stored in DB 
  (for each company only 100 rows are stored)</p></div></div><div class="top"><p class="src"><a name="v:convRowV" class="def">convRowV</a> :: [SqlValue] -&gt; String</p><div class="doc"><p>The <code><a href="DB.html#v:convRowV">convRowV</a></code> is a helper function to process prices rows to get volume</p></div></div><div class="top"><p class="src"><a name="v:queryCompanies" class="def">queryCompanies</a> :: IO ()</p><div class="doc"><p>The <code><a href="DB.html#v:queryCompanies">queryCompanies</a></code> function has a purpose to get companies list</p></div></div><div class="top"><p class="src"><a name="v:convRow" class="def">convRow</a> :: [SqlValue] -&gt; String</p><div class="doc"><p>The <code><a href="DB.html#v:convRow">convRow</a></code> function is a helper function to process prices rows</p></div></div><div class="top"><p class="src"><a name="v:queryCompany" class="def">queryCompany</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>The <code>String</code> argument to provide the company name to query</p></td></tr><tr><td class="src">-&gt; IO String</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>The <code><a href="DB.html#v:queryCompany">queryCompany</a></code> function has a purpose to get a company (to check if it is present in DB)</p></div></div><div class="top"><p class="src"><a name="v:convRowC" class="def">convRowC</a> :: [SqlValue] -&gt; String</p><div class="doc"><p>The <code><a href="DB.html#v:convRowC">convRowC</a></code> function is a helper function to process companies rows	   </p></div></div><h1 id="g:3">Insert functions           </h1><div class="top"><p class="src"><a name="v:insert" class="def">insert</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="DataType.html#t:Price">Price</a></td><td class="doc"><p>The <code><a href="DataType.html#t:Price">Price</a></code> argument to provide the prices to be inserted</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>The <code><a href="DB.html#v:insert">insert</a></code> function has a purpose to insert stock prices</p></div></div><div class="top"><p class="src"><a name="v:insertMany" class="def">insertMany</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>The <code>String</code> argument to provide the company name to be inserted</p></td></tr><tr><td class="src">-&gt; [<a href="DataType.html#t:Price">Price</a>]</td><td class="doc"><p>The [<code><a href="DataType.html#t:Price">Price</a></code>] argument to provide the prices to be inserted</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>The <code><a href="DB.html#v:insertMany">insertMany</a></code> function has a purpose to insert multiple rows of stock prices       </p></div></div><div class="top"><p class="src"><a name="v:insertCompany" class="def">insertCompany</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>The <code>String</code> argument to provide the company name to be inserted</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>The <code>String</code> argument to provide the user name to be inserted</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>The <code><a href="DB.html#v:insertCompany">insertCompany</a></code> function has a purpose to insert new company into companies list</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Date" class="def">Date</a> = (Integer, Int, Int)</p><div class="doc"><p>The type synonym <code><a href="DB.html#t:Date">Date</a></code> represents date format in a more understandable way</p></div></div><h1 id="g:4">Helper functions</h1><div class="top"><p class="src"><a name="v:getYear" class="def">getYear</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="DB.html#t:Date">Date</a></td><td class="doc"><p>The <code><a href="DB.html#t:Date">Date</a></code> argument to provide the date to be parsed</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>The <code>String</code> argument to return a year</p></td></tr></table></div><div class="doc"><p>The <code><a href="DB.html#v:getYear">getYear</a></code> function retrieves a year from date datatype</p></div></div><div class="top"><p class="src"><a name="v:getMonth" class="def">getMonth</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="DB.html#t:Date">Date</a></td><td class="doc"><p>The <code><a href="DB.html#t:Date">Date</a></code> argument to provide the date to be parsed</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>The <code>String</code> argument to return a month</p></td></tr></table></div><div class="doc"><p>The <code><a href="DB.html#v:getMonth">getMonth</a></code> function retrieves a month from date datatype</p></div></div><div class="top"><p class="src"><a name="v:getDay" class="def">getDay</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="DB.html#t:Date">Date</a></td><td class="doc"><p>The <code><a href="DB.html#t:Date">Date</a></code> argument to provide the date to be parsed</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>The <code>String</code> argument to return a day</p></td></tr></table></div><div class="doc"><p>The <code><a href="DB.html#v:getDay">getDay</a></code> function retrieves a day from date datatype</p></div></div><div class="top"><p class="src"><a name="v:formRows" class="def">formRows</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>The <code>String</code> argument to represent company name</p></td></tr><tr><td class="src">-&gt; [<a href="DataType.html#t:Price">Price</a>]</td><td class="doc"><p>The [<code><a href="DataType.html#t:Price">Price</a></code>] argument to represent company prices</p></td></tr><tr><td class="src">-&gt; [[SqlValue]]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>The <code><a href="DB.html#v:formRows">formRows</a></code> function is a helper function to generate rows from stock prices data   </p></div></div><div class="top"><p class="src"><a name="v:formRow" class="def">formRow</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>The <code>String</code> argument to represent company name</p></td></tr><tr><td class="src">-&gt; <a href="DataType.html#t:Price">Price</a></td><td class="doc"><p>The <code><a href="DataType.html#t:Price">Price</a></code> argument to represent company prices</p></td></tr><tr><td class="src">-&gt; [SqlValue]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>The <code><a href="DB.html#v:formRow">formRow</a></code> function is a helper function to generate a row from stock prices data</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>